<?xml version="1.0"?>
<!DOCTYPE mycat:schema SYSTEM "schema.dtd">
<mycat:schema xmlns:mycat="http://io.mycat/">

	<schema name="mycattest" checkSQLschema="false" sqlMaxLimit="100">
		<table name="employee" primaryKey="ID" dataNode="dn1,dn4,dn5" rule="sharding-by-intfile" />	 
 <table name="travelrecord" dataNode="dn1,dn3,dn4" rule="auto-sharding-long" />
 <table name="t1" dataNode="dn_1,dn_2" rule="mod-long" primaryKey="id" />
<table name="t2" dataNode="dn_2,dn_1" rule="mod-long" primaryKey="id" />

 

<table name="mycustomer" primaryKey="ID" dataNode="dn1,dn4" rule="mod-long-2">              
        <childTable name="myorders" primaryKey="ID" joinKey="customer_id"  parentKey="id">
                <childTable name="myorder_items" joinKey="order_id"  parentKey="id" />       
        </childTable>
</table>

		<!-- global table is auto cloned to all defined data nodes ,so can join 
		with any table whose sharding node is in the same data node -->
		<!--   <table name="company" primaryKey="ID" type="global" dataNode="dn1,dn2,dn3" />
		<table name="goods" primaryKey="ID" type="global" dataNode="dn1,dn2" /> 
		random sharding using mod sharind rule
		<table name="hotnews" primaryKey="ID" dataNode="dn1,dn2"
		rule="mod-long" />
		  <table name="employee" primaryKey="ID" dataNode="dn1,dn2"
		rule="sharding-by-intfile" />
		<table name="customer" primaryKey="ID" dataNode="dn1,dn2"
		rule="sharding-by-intfile">
				<childTable name="orders" primaryKey="ID" joinKey="customer_id"
				parentKey="id">
				</childTable> 
		</table> 
		<table name="mycat_sequence" dataNode="dn1" /> -->
</schema>

  <schema name="TESTDB" checkSQLschema="false" sqlMaxLimit="100" dataNode="dn7">
        <!-- <table name="sbtest1" primaryKey="ID" autoIncrement="true" dataNode="dn1"
               rule="mod-long" /> -->
  </schema>

	<dataNode name="dn1" dataHost="localhost1" database="db1" />
	<dataNode name="dn2" dataHost="localhost1" database="db2" />
	<dataNode name="dn3" dataHost="localhost1" database="db3" />  
    <dataNode name="dn4" dataHost="localhost2" database="db1" />
    <dataNode name="dn5" dataHost="localhost2" database="db2" />
    <dataNode name="dn6" dataHost="localhost2" database="db3" />
    
    <dataNode name="dn_1" dataHost="dh1" database="db1" />
    <dataNode name="dn_2" dataHost="dh1" database="db2" />
    
     <dataNode name="dn7" dataHost="localhost3" database="test_xumin" />
  <!--   <dataNode name="dn5" dataHost="localhost2" database="db2" />
    <dataNode name="dn6" dataHost="localhost2" database="db3" /> -->
    
	<!--<dataHost name="localhost1" maxCon="1000" minCon="10" balance="3"
	writeType="0" dbType="mysql" dbDriver="native" switchType="1"  slaveThreshold="100">  -->
	<dataHost name="localhost1" maxCon="1000" minCon="10" balance="0"
	writeType="0" dbType="mysql" dbDriver="native" switchType="1"  slaveThreshold="100">
	<heartbeat>select user()</heartbeat>
	<!-- can have multi write hosts -->
	<writeHost host="hostM1" url="10.40.6.187:3306" user="root" password="123456">
		<!-- can have multi read hosts -->
   		<readHost host="hostS1" url="10.40.6.228:3306" user="root" password="123456" weight="1" />
   	</writeHost>
	 
   </dataHost>
   
    <dataHost name="localhost2" maxCon="1000" minCon="10" balance="0"
	writeType="0" dbType="mysql" dbDriver="native" switchType="1"  slaveThreshold="100">
		<heartbeat>select user()</heartbeat>
		<writeHost host="hostM1" url="10.40.6.187:3306" user="root" password="123456">
<!-- 本地就用这个 		<writeHost host="hostM1" url="127.0.0.1:3306" user="root" password="123456">

 --> 		
 
 
      </writeHost>
	 
   </dataHost>  
   
    <dataHost name="dh1" maxCon="1000" minCon="10" balance="0"
                        writeType="0" dbType="mysql" dbDriver="native" switchType="1"  slaveThreshold="100">                                                                                                               
                                        <heartbeat>select user()</heartbeat>
                                         <writeHost host="hostM1" url="10.40.6.187:3306" user="root"  password="123456"/>
<!--   本地就用这个              <writeHost host="hostM1" url="127.0.0.1:3306" user="root"  password="123456"/>
 -->    </dataHost> 
    
    <dataHost name="localhost3" maxCon="1000" minCon="10" balance="0"
	writeType="0" dbType="mysql" dbDriver="native" switchType="0"  slaveThreshold="100">
	<heartbeat>select user()</heartbeat>
	<!-- can have multi write hosts -->
	<writeHost host="hostM1" url="10.40.6.187:3306" user="root" password="123456">
		 
   	</writeHost>
	 
   </dataHost>
</mycat:schema>