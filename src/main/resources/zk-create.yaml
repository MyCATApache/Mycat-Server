zkUrl : 192.168.31.196:2181
zkUsed : false
zkZone : mycat
mycat-zones :
  cdzone :
    id : cdzone
    name : 成都中心
    cluster :
      cdcluster1 :
        zone : cdzone
        site : CD_LT_JF1
        nodeid: cdnode1,cdnode2
      cdcluster2 :
        zone: cdzone
        site : CD_LT_JF2
        nodeid : cdnode1,cdnode2
      bjcluster1 :
        zone: bjzone
        site : BJ_LT_JF1
        nodeid: bjnode1,bjnode2

    mysqlhost :
      mysqlhost1 :
        name : mysqlhost1
        mysqlhostip : localhost
        user : root
        password : password
        port : 22

      mysqlhost2 :
        name : mysqlhost2
        mysqlhostip : localhost1
        user : root
        password : password
        port : 22

  bjzone :
    id : bjzone
    name : 成都中心

mycat-hosts :
   host_1 :
    hostname : host1
    ip : localhost
    port : 22
    user : root
    password : password

   host_2 :
    hostname : host1
    ip : localhost
    port : 22
    user : root
    password : password

mycat-nodes :
  mycat_cd_01 :
    name : mycat_cd_01
    hostid : host1
    host : localhost:8066
    zone : cdzone
    cluster : cdcluster1
    weight : 1
    leader : 1
    state : red
    system:
      defaultsqlparser : druidparser
      serverport : 8066
      managerPort : 9066
      sequncehandlertype : 1
    user :
      test :
        name : test
        password : admin
        readOnly : true
        schemas  :
          - TESTDB
      antest :
        name : antest
        password : admin
        readOnly : true
        schemas  :
          - AnotherDB
      mycat :
        name: mycat
        password: admin
        readOnly : false
        schemas:
          - TESTDB
    rule :
      sharding-by-enum :
        name : sharding-by-enum
        functionName : org.opencloudb.route.function.PartitionByFileMap
        column : create_time
        defaultnode : 0
        type : 0
        config :
          10000 : 0
          10010 : 1
      sharding-by-hour :
        name : sharding-by-hour
        functionName : org.opencloudb.route.function.LatestMonthPartion
        column : createTime
        splitOneDay : 24

      auto-sharding-long :
       name : auto-sharding-long
       column : id
       functionName : org.opencloudb.route.function.AutoPartitionByLong
       defaultNode : 0
       config :
             0-2000000 : 0
             2000001-4000000 : 1
             4000001-8000000 : 2

      sharding-by-mod :
       name : sharding-by-mod
       column : id
       functionName : org.opencloudb.route.function.PartitionByMod
       count : 3

      auto-sharding-rang-mod :
       name : auto-sharding-rang-mod
       column : id
       functionName : org.opencloudb.route.function.PartitionByRangeMod
       defaultNode : 21
       config :
             0-200M : 5
             200M1-400M : 1
             400M1-600M : 4
             600M1-800M : 4
             800M1-1000M : 6

      sharding-by-RangeDateHash :
       name : sharding-by-RangeDateHash
       column : create_time
       functionName : org.opencloudb.route.function.PartitionByRangeDateHash
       sBeginDate : "2014-01-01 00:00:00"
       sPartionDay : 3
       dateFormat : yyyy-MM-dd HH:mm:ss
       groupPartionSize : 6

    sequence:
      sequence-3 :
        current_value : 100000
        increament : 100
      sequence-2 :
        workid: 1
        centerid : 2
      sequence-0 :
        type : file
      sequence-1 :
        type : 1
        config :
          current_value : 100000
          increament : 100
        sequence-mapping :
          T_NODE :  0

    schema :
      TESTDB :
        name : TESTDB
        checkSQLSchema : false
        defaultMaxLimit : 100
        dataNode : dn1

        travelrecord :
          name :  travelrecord
          datanode :  dn1,dn2,dn3
          ruleName :  auto-sharding-long

        company :
          name :  company
          datanode :  dn1,dn2,dn3
          primaryKey : ID
          type : 1  //全局表为 1

        goods :
          name :  goods
          datanode :  dn1,dn2
          primaryKey : ID
          type : 1  //全局表为 1

        hotnews :
          name :  hotnews
          datanode :  dn1,dn2,dn3
          primaryKey : ID
          ruleName : sharding-by-mod

        employee :
          name :  employee
          datanode :  dn1,dn2
          primaryKey : ID
          ruleName : sharding-by-enum

        customer :
          name :  customer
          datanode :  dn1,dn2
          primaryKey : ID
          ruleName : sharding-by-enum

          orders :
            name :  orders
            primarykey :  ID
            joinkey : customer_id
            parentkey : ID

            order_items :
              name :  order_items
              joinkey : order_id
              parentkey : ID

          customer_addr :
            name :  customer_addr
            joinkey : customer_id
            parentkey : ID

    #    offer :
    #      name :  offer
    #      datanode :  offer_dn$1-20
    #      primaryKey : id
    #      ruleName : auto-sharding-rang-mod
    #
    #    offer1 :
    #      name :  offer1
    #      datanode :  offer_dn$1-36
    #      primaryKey : id
    #      ruleName : sharding-by-RangeDateHash

      AnotherDB :
        name : AnotherDB
        checkSQLSchema : false
        defaultMaxLimit : 100
        dataNode : dn2

        travelrecord :
          name :  travelrecord
          datanode :  dn1,dn2,dn3
          ruleName :  auto-sharding-long

        company :
          name :  company
          datanode :  dn1,dn2,dn3
          primaryKey : ID
          type : 1  //全局表为 1

    datanode :
      -
        name : dn1
        dataHost : localhost1
        database : db1
      -
        name : dn2
        dataHost : localhost1
        database : db2
      -
        name : dn3
        dataHost : localhost1
        database : db3
    #  -
    #    name : offer_dn$0-127
    #    dataHost : localhost1
    #    database : db1$0-127

    datahost :
      localhost1 :
        name : localhost1
        maxcon : 1000
        mincon : 10
        balance : 0
        writetype : 0
        dbtype : mysql
        dbDriver : native
        switchType : 1
        slaveThreshold : 100
        heartbeatSQL : select user()

        repid : rep1,rep2

mycat-lbs :
  loadbalance1 :
    name : loadbalance1
  loadbalance2 :
    name : loadbalance2

  lbgroup1 :
   name : lbgroup1
   zone : cdzone
   lbservice :
   balances :
    balances : loadbalance1,loadbalance2
    nodecluster : cdcluster1
    serviceport : 8066

    nodecluster : cdcluster2
    serviceport : 8166


mycat-mysqls :
  hostM1 :
    name : hostM1
    url : 10.16.0.215:3306
    user : root
    password : admin

  hostS1 :
    name : hostS1
    url : 10.16.0.216:3306
    user : root
    password : admin

  hostM2 :
    name : hostM2
    url : 10.16.0.215:3306
    user : root
    password : admin

  hostS2 :
    name : hostS2
    url : 10.16.0.216:3306
    user : root
    password : admin

  hostM3 :
    name : hostM3
    url : 10.16.0.215:3306
    user : root
    password : admin

  hostS3 :
    name : hostS3
    url : 10.16.0.216:3306
    user : root
    password : admin

  hostM4 :
    name : hostM4
    url : 10.16.0.215:3306
    user : root
    password : admin

  hostS4 :
    name : hostS4
    url : 10.16.0.216:3306
    user : root
    password : admin

mycat-mysqlgroup :
  rep1 :
    name : rep1
    hostM1 :
      host : hostM1
      readHost : hostS1

    hostM2 :
      host : hostM2

  rep2 :
    id : 2
    hostM3 :
      host : hostM3
      readHost : hostS3

    hostM4 :
      host : hostM4
