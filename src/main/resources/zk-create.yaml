zkUrl : 192.168.31.196:2181
zkZone : mycat-zone99
zkClu : cluster
zkID : 8
system:
  defaultsqlparser : druidparser
  serverport : 8066
  managerPort : 9066
  sequncehandlertype : 1
user :
  test :
    name : test
    password : admin
    readOnly : true
    schemas  :
      - TESTDB
  antest :
    name : antest
    password : admin
    readOnly : true
    schemas  :
      - AnotherDB
  mycat :
    name: mycat
    password: admin
    readOnly : false
    schemas:
      - TESTDB
rule :
  sharding-by-enum :
    name : sharding-by-enum
    functionName : org.opencloudb.route.function.PartitionByFileMap
    column : create_time
    defaultnode : 0
    type : 0
    config :
      10000 : 0
      10010 : 1
  sharding-by-hour :
    name : sharding-by-hour
    functionName : org.opencloudb.route.function.LatestMonthPartion
    column : createTime
    splitOneDay : 24

  auto-sharding-long :
   name : auto-sharding-long
   column : id
   functionName : org.opencloudb.route.function.AutoPartitionByLong
   defaultNode : 0
   config :
         0-2000000 : 0
         2000001-4000000 : 1
         4000001-8000000 : 2

  sharding-by-mod :
   name : sharding-by-mod
   column : id
   functionName : org.opencloudb.route.function.PartitionByMod
   count : 3

  auto-sharding-rang-mod :
   name : auto-sharding-rang-mod
   column : id
   functionName : org.opencloudb.route.function.PartitionByRangeMod
   defaultNode : 21
   config :
         0-200M : 5
         200M1-400M : 1
         400M1-600M : 4
         600M1-800M : 4
         800M1-1000M : 6

  sharding-by-RangeDateHash :
   name : sharding-by-RangeDateHash
   column : create_time
   functionName : org.opencloudb.route.function.PartitionByRangeDateHash
   sBeginDate : "2014-01-01 00:00:00"
   sPartionDay : 3
   dateFormat : yyyy-MM-dd HH:mm:ss
   groupPartionSize : 6

sequence:
  sequence-3 :
    current_value : 100000
    increament : 100
  sequence-2 :
    workid: 1
    centerid : 2
  sequence-0 :
    type : file
  sequence-1 :
    type : 1
    config :
      current_value : 100000
      increament : 100
    sequence-mapping :
      T_NODE :  0

schema :
  TESTDB :
    name : TESTDB
    checkSQLSchema : false
    defaultMaxLimit : 100
    dataNode : dn1

    travelrecord :
      name :  travelrecord
      datanode :  dn1,dn2,dn3
      ruleName :  auto-sharding-long

    company :
      name :  company
      datanode :  dn1,dn2,dn3
      primaryKey : ID
      type : 1  //全局表为 1

    goods :
      name :  goods
      datanode :  dn1,dn2
      primaryKey : ID
      type : 1  //全局表为 1

    hotnews :
      name :  hotnews
      datanode :  dn1,dn2,dn3
      primaryKey : ID
      ruleName : sharding-by-mod

    employee :
      name :  employee
      datanode :  dn1,dn2
      primaryKey : ID
      ruleName : sharding-by-enum

    customer :
      name :  customer
      datanode :  dn1,dn2
      primaryKey : ID
      ruleName : sharding-by-enum

      orders :
        name :  orders
        primarykey :  ID
        joinkey : customer_id
        parentkey : ID

        order_items :
          name :  order_items
          joinkey : order_id
          parentkey : ID

      customer_addr :
        name :  customer_addr
        joinkey : customer_id
        parentkey : ID

#    offer :
#      name :  offer
#      datanode :  offer_dn$1-20
#      primaryKey : id
#      ruleName : auto-sharding-rang-mod
#
#    offer1 :
#      name :  offer1
#      datanode :  offer_dn$1-36
#      primaryKey : id
#      ruleName : sharding-by-RangeDateHash

  AnotherDB :
    name : AnotherDB
    checkSQLSchema : false
    defaultMaxLimit : 100
    dataNode : dn2

    travelrecord :
      name :  travelrecord
      datanode :  dn1,dn2,dn3
      ruleName :  auto-sharding-long

    company :
      name :  company
      datanode :  dn1,dn2,dn3
      primaryKey : ID
      type : 1  //全局表为 1

datanode :
  -
    name : dn1
    dataHost : localhost1
    database : db1
  -
    name : dn2
    dataHost : localhost1
    database : db2
  -
    name : dn3
    dataHost : localhost1
    database : db3
#  -
#    name : offer_dn$0-127
#    dataHost : localhost1
#    database : db1$0-127

datahost :
  localhost1 :
    name : localhost1
    maxcon : 1000
    mincon : 10
    balance : 0
    writetype : 0
    dbtype : mysql
    dbDriver : native
    switchType : 1
    slaveThreshold : 100
    heartbeatSQL : select user()

    repid : rep1,rep2


mysqlrep :
  rep1 :
    id : 1
    hostM1 :
      host : hostM1
      url : 10.16.0.215:3306
      user : root
      password : admin

      readHost :
        host : hostS1
        url : 10.16.0.216:3306
        user : root
        password : admin

    hostM2 :
      host : hostM2
      url : localhost:3316
      user : root
      password : 123456

  rep2 :
    id : 2
    hostM1 :
      host : hostM1
      url : 10.16.0.215:3306
      user : root
      password : admin

      readHost :
        host : hostS1
        url : 10.16.0.216:3306
        user : root
        password : admin

    hostM2 :
      host : hostM2
      url : localhost:3316
      user : root
      password : 123456


mycatlb :
  lb-cluster1 :
    id : 1
    name : lb-cluster1
    zone : mycat-zone99
    hostid : localhost1